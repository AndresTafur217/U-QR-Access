<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QR Access</title>
  <link rel="icon" href="./assets/logoQR.svg" type="image/x-icon">
  <link rel="stylesheet" href="./assets/output.css">
  <link rel="stylesheet" href="/css/areas.css">
</head>
<body class="relative font-bold w-dvw h-dvh m-0 p-0 flex bg-gradient-to-bl 
  to-purple-700 from-green-700 overflow-hidden overscroll-x-none overscroll-y-none">
  <div class="absolute inset-0 overflow-hidden">
    <div class="absolute -top-500 -left-300 z-0 size-700 flex rounded-full bg-gradient-to-tr 
      to-blue-50/5 via-blue-50/0 from-blue-600/70 overflow-hidden"></div>
    <div class="absolute top-5 left-5 z-0 size-70 flex rounded-4xl bg-black/10 overflow-hidden"></div>
    <div class="absolute top-75 left-75 z-0 size-40 flex rounded-4xl bg-black/10 overflow-hidden"></div>
    <div class="absolute top-50 left-80 z-0 size-20 flex rounded-2xl bg-black/20 overflow-hidden"></div>
    <div class="absolute top-120 left-73 z-0 size-20 flex rounded-3xl bg-black/20 overflow-hidden"></div>
    <div class="absolute top-85 left-20 z-0 size-50 flex rounded-4xl bg-black/25 overflow-hidden"></div>
    
    <div class="absolute -bottom-720 -right-500 z-0 size-900 flex rounded-full bg-gradient-to-bl 
      to-blue-50/5 via-blue-50/0 from-emerald-600/70 overflow-hidden"></div>
    <div class="absolute bottom-5 right-5 z-0 size-70 flex rounded-4xl bg-black/10 overflow-hidden"></div>
    <div class="absolute bottom-75 right-75 z-0 size-40 flex rounded-4xl bg-black/10 overflow-hidden"></div>
    <div class="absolute bottom-5 right-85 z-0 size-40 flex rounded-4xl bg-black/10 overflow-hidden"></div>
    <div class="absolute bottom-50 right-80 z-0 size-20 flex rounded-2xl bg-black/20 overflow-hidden"></div>
    <div class="absolute bottom-120 right-73 z-0 size-20 flex rounded-3xl bg-black/20 overflow-hidden"></div>
    <div class="absolute bottom-85 right-20 z-0 size-50 flex rounded-4xl bg-black/25 overflow-hidden"></div>
  </div>
  
  <div class="w-dvw h-dvh m-0 p-0 flex justify-center items-center overflow-hidden">
    
      <div class="relative z-10 p-5 m-5 w-360 min-w-60 h-170 min-h-75 flex flex-col gap-5 justify-start 
        items-center overflow-hidden rounded-4xl bg-white/70 shadow-2xl animate-pulse-fade-in">
        <div class="box-border w-full h-full overflow-auto scrollbar">
          <div class="w-full h-12.5 sm:h-17.5 flex flex-row justify-between gap-5 items-center overflow-hidden">
            
            <a href="./index.html" class="w-12.5 sm:w-17.5 h-full p-1.5 sm:p-3.5 flex items-center justify-center cursor-pointer mx-2.5 
              transition-all ease-in-out hover:scale-105 hover:bg-stone-200/90
              rounded-2xl sm:rounded-3xl">
              <svg class="size-7.5 sm:size-10">
                <use xlink:href="./assets/sprite.svg#left" />
              </svg>              
            </a>

            <h1 class="h-full text-center flex justify-center items-center flex-1 text-xl sm:text-3xl 
              font-bold bg-stone-200/90 rounded-2xl sm:rounded-3xl">Areas</h1>
          </div>
          <div id="errorMensaje" class="text-red-500 text-center p-3.5 my-5 hidden bg-red-400/20 border border-red-500 rounded-xl"></div>

          <div id="areasGrid" class="sm:flex flex-row gap-5 flex-wrap my-8 mx-3.5">
          </div>

          <div class="text-center p-10 flex flex-col justify-center items-center" id="loading">
            <div class="size-10 border-4 border-stone-300 border-t-4 border-t-emerald-500
              rounded-full animate-spin mb-5"></div>
              <p>Cargando áreas disponibles...</p>
            </div>
          </div>
        </div>
      </div>
      <!-- Modal para escáner QR -->
      <div id="modalScanner" 
        class="fixed top-0 left-0 z-50 w-dvw h-dvh bg-black/50 flex justify-center items-center 
        invisible opacity-0 transition-opacity duration-300">
        <div class="w-100 sm:w-200 min-w-75 h-4/5 min-h-100 p-5 bg-white/70 rounded-4xl shadow-2xl relative">
          <div class="box-border h-full w-full flex flex-col gap-5 justify-center items-center overflow-auto scrollbar">
            <span onclick="cerrarScanner()" 
                class="absolute top-3 right-3 text-gray-600 cursor-pointer transition-all ease-in-out hover:scale-105 hover:text-black">
              <svg width="10" height="10">
                <use xlink:href="./assets/sprite.svg#close" />
              </svg>
            </span>

            <h2>Escanear Código QR</h2>
            <p class="text-center mb-5 opacity-90">Coloca tu código QR dentro del marco para validar el acceso</p>
                    
            <div class="relative my-5 text-center w-3/5">
              <select title="camara" id="cameraSelect" class="w-full p-1.5 mb-2.5 rounded-md bg-white/20 text-black border">
                <option value="">Selecciona una cámara</option>
              </select>
              <video id="video" class="w-full mx-w-100 h-75 rounded-xl object-cover bg-black" 
                autoplay playsinline muted></video>
              <div class="absolute w-50 h-50 border-4 border-green-600 rounded-xl shadow-2xl animate-pulse 
                top-1/2 left-1/2 -translate-y-2/5 -translate-x-1/2"></div>
            </div>
            
            <div class="bg-green-600/30 border border-green-600 rounded-xl p-3.5 my-3.5" id="scanningIndicator">
              Buscando código QR...
            </div>
            
            <div class="my-5 p-5 rounded-xl text-center leading-normal" id="resultado"></div>
            
            <div id="cameraError" class="hidden bg-red-600/20 border-2 border-red-500 rounded-xl p-5 text-center text-red-500">
              <h3>❌ Error de Cámara</h3>
              <p id="cameraErrorMessage"></p>
            </div>
            
            <div>
              <button class="bg-emerald-700 text-white border-none py-3.5 px-7.5 rounded-3xl cursor-pointer 
                text-lg mt-5 transition-all ease-in-out hover:bg-emerald-600 hover:scale-105" 
                onclick="cerrarScanner()">Cerrar Escáner</button>
            </div>
          </div>
        </div>
      </div>
  </div>
  <script src="/js/areas.js"></script>
  <script src="https://unpkg.com/@zxing/library@0.20.0/umd/index.min.js"></script>
</body>
</html>